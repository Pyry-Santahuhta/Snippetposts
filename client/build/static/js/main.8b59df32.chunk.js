(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{120:function(e,t,n){},338:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(34),s=n.n(r),i=(n(120),n(14)),o=n(4),l=n(18),j=n(11),b=n(399),d=n(395),u=n(386),p=n(396),h=Object(p.a)((function(e){return{search:{width:"35%",marginTop:"30px"},dashBoardBox:{flexGrow:1},fetchPosts:{marginLeft:"2%",marginRight:"2%"},postForm:{position:"sticky",top:0,left:0,alignSelf:"start"},dashboardList:{flexGrow:1,maxHeight:"100%",overflow:"auto"},navbarGrid:{justify:"space-between",alignItems:"center"},addCommentTextArea:{marginTop:"20px",marginBottom:"10px"},listItem:{display:"flex",flexDirection:"column",alignItems:"flex-start"},listItemSecondaryText:{display:"inline-block",marginTop:"10px"},divider:{marginBottom:"20px"},boxContainer:{marginTop:"20vh",display:"flex",flexDirection:"column",alignItems:"center"},postDetailsBox:{width:"80%",marginLeft:"10%",marginTop:"5%",textAlign:"left"},postBox:{padding:"3%"},postContent:{marginTop:"1%"},commentContent:{wordWrap:"break-word",marginTop:"1%"},postInfo:{fontStyle:"italic",marginTop:"1%"},likesGrid:{direction:"row",marginTop:"1%"}}})),x=n(1),m=function(){var e=Object(a.useState)(null),t=Object(j.a)(e,2),n=t[0],c=t[1],r=h(),s=Object(i.f)();function p(e){var t=e.target.name,n=e.target.value;c((function(e){return Object(l.a)(Object(l.a)({},e),{},Object(o.a)({},t,n))}))}return Object(x.jsxs)(u.a,{className:r.boxContainer,children:[Object(x.jsx)("h1",{children:"Login"}),Object(x.jsxs)("form",{id:"login-form",onSubmit:function(e){e.preventDefault(),fetch("/users/login/",{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){e.success&&(localStorage.setItem("auth_token",e.token),s("/"),window.location.reload(!1)),e.msg&&(document.getElementById("errors").innerHTML=e.msg)}))},children:[Object(x.jsx)("label",{children:Object(x.jsx)(d.a,{type:"email",label:"email",name:"email",onChange:p})}),Object(x.jsx)("br",{}),Object(x.jsx)("br",{}),Object(x.jsx)("label",{children:Object(x.jsx)(d.a,{label:"password",type:"password",name:"password",onChange:p})}),Object(x.jsx)("br",{}),Object(x.jsx)("br",{}),Object(x.jsx)(b.a,{type:"submit",value:"Submit",variant:"contained",color:"primary",children:"Submit"})]}),Object(x.jsx)("div",{id:"errors"})]})},O=function(){var e=Object(a.useState)({}),t=Object(j.a)(e,2),n=t[0],c=t[1],r=h(),s=Object(i.f)();function p(e){var t=e.target.name,n=e.target.value;c((function(e){return Object(l.a)(Object(l.a)({},e),{},Object(o.a)({},t,n))}))}return Object(x.jsxs)(u.a,{className:r.boxContainer,children:[Object(x.jsx)("h1",{children:"Register"}),Object(x.jsxs)("form",{id:"register-form",onSubmit:function(e){e.preventDefault(),fetch("/users/register/",{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){e.success&&s("/login"),e.msg&&(document.getElementById("errors").innerHTML=e.msg)}))},children:[Object(x.jsx)("label",{children:Object(x.jsx)(d.a,{type:"email",label:"email",name:"email",onChange:p})}),Object(x.jsx)("br",{})," ",Object(x.jsx)("br",{}),Object(x.jsx)("label",{children:Object(x.jsx)(d.a,{label:"password",type:"password",name:"password",onChange:p})}),Object(x.jsx)("br",{}),Object(x.jsx)("br",{}),Object(x.jsx)(b.a,{type:"submit",value:"Submit",variant:"contained",color:"primary",children:"Submit"})]}),Object(x.jsx)("div",{id:"errors"})]})},f=localStorage.getItem("auth_token"),g=function(){var e=Object(a.useState)({}),t=Object(j.a)(e,2),n=t[0],c=t[1];function r(e){var t=e.target.name,n=e.target.value;c((function(e){return Object(l.a)(Object(l.a)({},e),{},Object(o.a)({},t,n))}))}return f?Object(x.jsxs)("div",{children:[Object(x.jsxs)("form",{id:"post-form",onSubmit:function(e){e.preventDefault(),f&&n.code&&n.description&&n.title?fetch("/posts/",{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json",Authorization:"Bearer "+f}}).then((function(e){document.getElementById("alertState").innerHTML="Success!",document.getElementById("post-form").value="",window.location.reload(!1)})):document.getElementById("alertState").innerHTML="Write something first!"},children:[Object(x.jsx)("h2",{children:"Post a new code snippet"}),Object(x.jsxs)("label",{children:[Object(x.jsx)("br",{}),Object(x.jsx)(d.a,{type:"text",label:"Title",name:"title",onChange:r,fullWidth:!0})]}),Object(x.jsxs)("label",{children:[Object(x.jsx)("br",{}),Object(x.jsx)(d.a,{type:"text",label:"Description",name:"description",onChange:r,multiline:!0,rows:8,fullWidth:!0})]}),Object(x.jsx)("br",{}),Object(x.jsxs)("label",{children:[Object(x.jsx)("br",{}),Object(x.jsx)(d.a,{type:"text",label:"Code",name:"code",onChange:r,multiline:!0,rows:12,fullWidth:!0})]}),Object(x.jsx)("br",{}),Object(x.jsx)(b.a,{type:"submit",value:"Submit",variant:"contained",color:"primary",children:"Submit"})]}),Object(x.jsx)("div",{id:"alertState"})]}):Object(x.jsx)("div",{})},v=n(17),y=n.n(v),w=n(24),S=n(41),k=n(42),C=n(65),T=n(64),N=n(407),B=n(398),I=n(403),E=n(409),P=n(402),D=n(63),G=n(101),L=n.n(G),A=function(e){var t=h();return Object(x.jsx)(d.a,{className:t.search,type:"text",name:"search",label:"Search",InputProps:{endAdornment:Object(x.jsx)(L.a,{})},onKeyPress:function(){var t=Object(w.a)(y.a.mark((function t(n){var a,c,r;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("Enter"!==n.key){t.next=13;break}return n.preventDefault(),a=n.target.value,n.target.value="",n.target.blur(),t.next=7,fetch("/posts/search/"+a,{method:"GET",headers:{"Content-Type":"application/json"}});case 7:return c=t.sent,t.next=10,c.json();case 10:r=t.sent,console.log(r),e.setPosts(r);case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()})},H=n(400),M=n(102),_=n.n(M),J=n(103),W=n.n(J),F=n(408);var R=function(e){if(e){var t=e.split(".")[1].replace("-","+").replace("_","/");return JSON.parse(window.atob(t))}},z=localStorage.getItem("auth_token"),K=function(e){var t=h(),n=Object(a.useState)(0),c=Object(j.a)(n,2),r=c[0],s=c[1],i=Object(a.useState)(e.post.likes),o=Object(j.a)(i,2),l=o[0],b=o[1];function d(e){return u.apply(this,arguments)}function u(){return u=Object(w.a)(y.a.mark((function t(n){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("/posts/vote/"+e.id,{method:"PATCH",body:JSON.stringify({vote:n}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+z}});case 2:case"end":return t.stop()}}),t)}))),u.apply(this,arguments)}function p(e){return m.apply(this,arguments)}function m(){return(m=Object(w.a)(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(0),e.next=3,d(0);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(){return(O=Object(w.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(1!==r){e.next=5;break}b(l-1),p(1),e.next=18;break;case 5:if(-1!==r){e.next=14;break}return b(l+2),e.next=9,p(-1);case 9:return s(1),e.next=12,d(1);case 12:e.next=18;break;case 14:return b(l+1),s(1),e.next=18,d(1);case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(){return(f=Object(w.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(-1!==r){e.next=5;break}b(l+1),p(-1),e.next=18;break;case 5:if(1!==r){e.next=14;break}return b(l-2),e.next=9,p(1);case 9:return s(-1),e.next=12,d(-1);case 12:e.next=18;break;case 14:return b(l-1),s(-1),e.next=18,d(-1);case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(a.useEffect)((function(){function t(){return(t=Object(w.a)(y.a.mark((function t(){var n,a,c;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=R(z),t.next=3,fetch("/users/"+n.id,{method:"GET"});case 3:return a=t.sent,t.next=6,a.json();case 6:(a=t.sent)&&(c=a.votes.find((function(t){return t.post.toString()===e.id})))&&(1===c.vote?s(1):s(-1));case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[e.id]),Object(x.jsxs)(H.a,{container:!0,className:t.likesGrid,children:[Object(x.jsx)(H.a,{item:!0,children:l}),Object(x.jsx)(F.a,{color:1===r?"select":"secondary",onClick:function(){return O.apply(this,arguments)},"aria-label":"ThumbUp",children:Object(x.jsx)(_.a,{})}),Object(x.jsx)(F.a,{color:-1===r?"select":"secondary",onClick:function(){return f.apply(this,arguments)},"aria-label":"ThumbDown",children:Object(x.jsx)(W.a,{})})]})},U=function(e){Object(C.a)(n,e);var t=Object(T.a)(n);function n(){var e;Object(S.a)(this,n);for(var a=arguments.length,c=new Array(a),r=0;r<a;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={posts:null},e}return Object(k.a)(n,[{key:"setPosts",value:function(e){e.length>0&&this.setState({posts:e});for(var t=document.getElementsByClassName("code"),n=0;n<t.length;n++)D.highlightElement(t[n])}},{key:"componentDidMount",value:function(){var e=Object(w.a)(y.a.mark((function e(){var t,n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/posts/",{method:"GET",headers:{"Content-Type":"application/json"}});case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,this.setPosts(n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props.navigate,n=this.props.classes;return Object(x.jsxs)("div",{children:[Object(x.jsx)(A,{setPosts:function(t){e.setPosts(t)}}),this.state.posts?Object(x.jsx)("div",{children:Object(x.jsx)(N.a,{children:this.state.posts.map((function(e,a){return Object(x.jsxs)("div",{children:[Object(x.jsxs)(B.a,{className:n.listItem,sx:{bgcolor:"primary.light"},children:[Object(x.jsx)(P.a,{onClick:function(){t("posts/"+e._id)},sx:{cursor:"pointer"},variant:"h5",children:e.title}),Object(x.jsx)(E.a,{sx:{display:"inline-block"},primary:Object(x.jsxs)(c.a.Fragment,{children:[Object(x.jsx)(P.a,{children:e.description}),Object(x.jsx)("span",{className:"code",children:e.code})]}),secondary:Object(x.jsxs)(P.a,{className:n.listItemSecondaryText,component:"span",variant:"body2",color:"secondary",children:[e.user.substring(0,e.user.indexOf("@")),Object(x.jsx)("br",{}),e.timestamp]})}),Object(x.jsx)(K,{post:e,id:e._id})]}),Object(x.jsx)(I.a,{variant:"inset",component:"li",className:n.divider})]},a)}))})}):Object(x.jsx)("div",{children:"No posts found"})]})}}]),n}(c.a.Component);function q(e){var t=Object(i.f)(),n=h();return Object(x.jsx)(U,Object(l.a)(Object(l.a)({},e),{},{navigate:t,classes:n}))}var Q=n(393),V=function(){var e=h(),t=Object(Q.a)((function(e){return e.breakpoints.up("md")}));return Object(x.jsx)(u.a,{className:e.dashBoardBox,children:Object(x.jsxs)(H.a,{direction:t?"row":"column",container:!0,spacing:1,children:[Object(x.jsx)(H.a,{className:e.fetchPosts,item:!0,xs:6,children:Object(x.jsx)(q,{})}),Object(x.jsx)(H.a,{item:!0,xs:5,className:e.postForm,children:Object(x.jsx)(g,{})})]})})},X=function(){return Object(x.jsx)("div",{children:Object(x.jsx)("h1",{children:"404: this is not the webpage you are looking for"})})},Y=n(26),Z=n(404),$=n(405),ee=function(){var e=Object(a.useState)(!1),t=Object(j.a)(e,2),n=t[0],c=t[1],r=Object(i.f)(),s=Object(Q.a)((function(e){return e.breakpoints.up("md")})),o=h();function l(){r("")}return Object(a.useEffect)((function(){localStorage.getItem("auth_token")&&c(!0)}),[]),Object(x.jsx)("div",{children:n?Object(x.jsx)(u.a,{sx:{flexGrow:1},children:Object(x.jsx)(Z.a,{position:"static",children:Object(x.jsx)($.a,{children:Object(x.jsxs)(H.a,{className:o.navbarGrid,container:!0,spacing:3,direction:s?"row":"column",children:[Object(x.jsx)(H.a,{item:!0,children:Object(x.jsx)(b.a,{color:"secondary",onClick:l,type:"button",children:Object(x.jsx)(P.a,{className:o.title,variant:s?"h3":"h4",children:"Snippet Posts"})})}),Object(x.jsx)(H.a,{item:!0,children:Object(x.jsx)(b.a,{onClick:function(){localStorage.removeItem("auth_token"),r("login"),c(!1),window.location.reload(!1)},type:"button",variant:"contained",color:"secondary",className:o.navButton,children:"Logout"})})]})})})}):Object(x.jsx)(u.a,{sx:{flexGrow:1},children:Object(x.jsx)(Z.a,{position:"static",children:Object(x.jsx)($.a,{children:Object(x.jsxs)(H.a,{className:o.navbarGrid,container:!0,spacing:3,direction:s?"row":"column",children:[Object(x.jsx)(H.a,{item:!0,children:Object(x.jsx)(b.a,{onClick:l,type:"button",color:"secondary",children:Object(x.jsx)(P.a,{className:o.title,variant:s?"h3":"h5",children:"Snippet Posts"})})}),Object(x.jsx)(H.a,{item:!0,children:Object(x.jsx)(Y.b,{to:"register",children:Object(x.jsx)(b.a,{variant:"contained",color:"secondary",type:"button",children:"Register"})})}),Object(x.jsx)(H.a,{item:!0,children:Object(x.jsx)(Y.b,{to:"login",children:Object(x.jsx)(b.a,{variant:"contained",color:"secondary",type:"button",children:"Login"})})})]})})})})})},te=localStorage.getItem("auth_token"),ne=function(e){var t=Object(a.useState)({}),n=Object(j.a)(t,2),c=n[0],r=n[1],s=h(),i=e.id;return Object(x.jsxs)("div",{children:[Object(x.jsx)(d.a,{className:s.addCommentTextArea,type:"text",id:"content",label:"Add a comment",name:"content",onChange:function(e){var t=e.target.name,n=e.target.value;r((function(e){return Object(l.a)(Object(l.a)({},e),{},Object(o.a)({},t,n))}))},fullWidth:!0}),Object(x.jsx)(b.a,{type:"submit",id:"submit",value:"Submit",variant:"contained",color:"primary",onClick:function(e){e.preventDefault(),te&&c.content?fetch("/posts/comment/"+i,{method:"POST",body:JSON.stringify(c),headers:{"Content-Type":"application/json",Authorization:"Bearer "+te}}).then((function(e){e.json().then((function(e){e.success&&(document.getElementById("alertState").innerHTML="Success!",document.getElementById("content").value="",window.location.reload(!1))}))})):document.getElementById("alertState").innerHTML="Write something first!"},children:"comment"}),Object(x.jsx)("div",{id:"alertState"})]})},ae=function(e){Object(C.a)(n,e);var t=Object(T.a)(n);function n(){var e;Object(S.a)(this,n);for(var a=arguments.length,c=new Array(a),r=0;r<a;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={loading:!0,post:{}},e}return Object(k.a)(n,[{key:"componentDidMount",value:function(){var e=Object(w.a)(y.a.mark((function e(){var t,n,a,c;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.id,e.next=3,fetch("/posts/"+t,{method:"GET",headers:{"Content-Type":"application/json"}});case 3:return n=e.sent,e.next=6,n.json();case 6:(a=e.sent)&&this.setState({post:a,loading:!1}),c=document.getElementById("code"),D.highlightElement(c);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.post,t=this.props.id,n=this.props.classes;return Object(x.jsx)("div",{children:this.state.loading||!this.state.post?Object(x.jsx)("div",{children:"No post found"}):Object(x.jsxs)(u.a,{className:n.postDetailsBox,children:[Object(x.jsxs)(u.a,{className:n.postBox,bgcolor:"primary.light",children:[Object(x.jsx)(P.a,{variant:"h4",children:e.title}),Object(x.jsx)(P.a,{className:n.postContent,children:e.description}),Object(x.jsx)("span",{id:"code",className:n.postContent,children:e.code}),Object(x.jsxs)(P.a,{className:n.postInfo,children:[e.user.substring(0,e.user.indexOf("@")),Object(x.jsx)("br",{}),e.timestamp]}),Object(x.jsx)(K,{post:e,id:t})]}),Object(x.jsx)(ne,{id:t}),e.comments?e.comments.map((function(e,t){return Object(x.jsxs)("div",{children:[Object(x.jsx)(H.a,{item:!0,children:Object(x.jsx)(P.a,{className:n.commentContent,children:e.content})}),Object(x.jsxs)(H.a,{className:n.postInfo,container:!0,children:[Object(x.jsx)(H.a,{item:!0,xs:1,color:"secondary",children:Object(x.jsx)(P.a,{children:e.user.substring(0,e.user.indexOf("@"))})}),Object(x.jsx)(H.a,{item:!0,xs:8,color:"secondary",children:Object(x.jsx)(P.a,{children:e.timestamp})})]}),Object(x.jsx)(I.a,{className:n.divider,variant:"inset"})]},t)})):null]})})}}]),n}(c.a.Component);function ce(e){var t=Object(i.g)().id,n=h();return Object(x.jsx)(ae,Object(l.a)(Object(l.a)({},e),{},{id:t,classes:n}))}var re=n(401),se=n(86),ie=Object(se.a)({palette:{primary:{main:"#B4C9CF",background:"#E6EDEF",contrastText:"#3C3C3B"},secondary:{main:"#3C3C3B",contrastText:"#B4C9CF"},select:{main:"#3B60E4"},contrastThreshold:3,tonalOffset:.2}}),oe=n(394);var le=function(){return Object(x.jsx)(re.a,{theme:ie,children:Object(x.jsxs)(oe.a,{sx:{bgcolor:"primary.background",width:"100%",minHeight:"100vh"},children:[Object(x.jsx)(ee,{}),Object(x.jsxs)(i.c,{children:[Object(x.jsx)(i.a,{path:"/",element:Object(x.jsx)(V,{})}),Object(x.jsx)(i.a,{path:"/posts/:id",element:Object(x.jsx)(ce,{})}),Object(x.jsx)(i.a,{path:"/login",element:Object(x.jsx)(m,{})}),Object(x.jsx)(i.a,{path:"/Register",element:Object(x.jsx)(O,{})}),Object(x.jsx)(i.a,{path:"*",element:Object(x.jsx)(X,{})})]})]})})};s.a.render(Object(x.jsx)(c.a.StrictMode,{children:Object(x.jsx)(Y.a,{children:Object(x.jsx)(le,{})})}),document.getElementById("root"))}},[[338,1,2]]]);
//# sourceMappingURL=main.8b59df32.chunk.js.map