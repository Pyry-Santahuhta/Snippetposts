(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{125:function(e,t,n){},126:function(e,t,n){},344:function(e,t,n){"use strict";n.r(t);var s=n(0),a=n.n(s),r=n(37),c=n.n(r),i=(n(125),n(126),n(14)),o=n(4),l=n(19),j=n(10),u=n(411),b=n(405),d=n(401),h=n(406),p=Object(h.a)((function(e){return{search:{width:"35%"},fetchPosts:{marginLeft:"2%",marginRight:"2%"},postForm:{position:"sticky",top:0,left:0,alignSelf:"start"},navbarGrid:{justify:"space-between",alignItems:"center"},addCommentTextArea:{marginTop:"20px",marginBottom:"10px"},listItem:{display:"flex",flexDirection:"column",alignItems:"flex-start"},listItemSecondaryText:{display:"inline-block",marginTop:"10px"},divider:{marginTop:"20px"},boxContainer:{marginTop:"20vh",display:"flex",flexDirection:"column",alignItems:"center"},postDetailsBox:{width:"80%",marginLeft:"10%",marginTop:"5%",textAlign:"left"},postBox:{padding:"3%"},postContent:{marginTop:"1%"},commentContent:{wordWrap:"break-word",marginTop:"1%"},postInfo:{fontStyle:"italic",marginTop:"1%"},likesGrid:{direction:"row",marginTop:"1%"}}})),m=n(409),O=n(419),x=n(103),f=n.n(x),v=n(408),y=n(1);function g(e){var t=Object(s.useState)(!0),n=Object(j.a)(t,2),a=n[0],r=n[1];function c(e,t){"clickaway"!==t&&r(!1)}return Object(y.jsx)("div",{children:Object(y.jsx)(m.a,{open:a,onClose:c,action:[Object(y.jsx)(O.a,{onClick:c,children:Object(y.jsx)(f.a,{})})],children:Object(y.jsx)(v.a,{onClose:c,severity:e.severity,sx:{width:"100%"},children:e.message})})})}var k=function(){var e=Object(s.useState)(null),t=Object(j.a)(e,2),n=t[0],a=t[1],r=p(),c=Object(s.useState)(null),h=Object(j.a)(c,2),m=h[0],O=h[1],x=Object(i.f)();function f(e){var t=e.target.name,n=e.target.value;a((function(e){return Object(l.a)(Object(l.a)({},e),{},Object(o.a)({},t,n))}))}return Object(y.jsxs)(d.a,{className:r.boxContainer,children:[Object(y.jsx)("h1",{children:"Login"}),Object(y.jsxs)("form",{id:"login-form",onSubmit:function(e){e.preventDefault(),n&&n.email&&n.password?fetch("/users/login/",{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){e.success?(localStorage.setItem("auth_token",e.token),x("/"),window.location.reload(!1)):e.msg&&O({msg:e.msg,severity:"error",key:Math.random()})})):O({msg:"Write your credentials first!",severity:"error",key:Math.random()})},children:[Object(y.jsx)("label",{children:Object(y.jsx)(b.a,{label:"email",name:"email",onChange:f})}),Object(y.jsx)("br",{}),Object(y.jsx)("br",{}),Object(y.jsx)("label",{children:Object(y.jsx)(b.a,{label:"password",type:"password",name:"password",onChange:f})}),Object(y.jsx)("br",{}),Object(y.jsx)("br",{}),Object(y.jsx)(u.a,{type:"submit",value:"Submit",variant:"contained",color:"primary",children:"Submit"})]}),m?Object(y.jsx)(g,{severity:m.severity,message:m.msg},m.key):null]})},w=function(){var e=Object(s.useState)({}),t=Object(j.a)(e,2),n=t[0],a=t[1],r=p(),c=Object(s.useState)(null),h=Object(j.a)(c,2),m=h[0],O=h[1],x=Object(i.f)();function f(e){var t=e.target.name,n=e.target.value;a((function(e){return Object(l.a)(Object(l.a)({},e),{},Object(o.a)({},t,n))}))}return Object(y.jsxs)(d.a,{className:r.boxContainer,children:[Object(y.jsx)("h1",{children:"Register"}),Object(y.jsxs)("form",{id:"register-form",onSubmit:function(e){e.preventDefault(),n&&n.email&&n.password?fetch("/users/register/",{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){e.success?x("/login"):e.msg&&O({msg:e.msg,severity:"error",key:Math.random()})})):O({msg:"Write your credentials first!",severity:"error",key:Math.random()})},children:[Object(y.jsx)("label",{children:Object(y.jsx)(b.a,{label:"email",name:"email",onChange:f})}),Object(y.jsx)("br",{})," ",Object(y.jsx)("br",{}),Object(y.jsx)("label",{children:Object(y.jsx)(b.a,{label:"password",type:"password",name:"password",onChange:f})}),Object(y.jsx)("br",{}),Object(y.jsx)("br",{}),Object(y.jsx)(u.a,{type:"submit",value:"Submit",variant:"contained",color:"primary",children:"Submit"})]}),m?Object(y.jsx)(g,{severity:m.severity,message:m.msg},m.key):null]})},C=localStorage.getItem("auth_token"),S=function(){var e=Object(s.useState)({}),t=Object(j.a)(e,2),n=t[0],a=t[1],r=Object(s.useState)(null),c=Object(j.a)(r,2),i=c[0],d=c[1];function h(e){var t=e.target.name,n=e.target.value;a((function(e){return Object(l.a)(Object(l.a)({},e),{},Object(o.a)({},t,n))}))}return C?Object(y.jsxs)("div",{children:[Object(y.jsxs)("form",{id:"post-form",onSubmit:function(e){e.preventDefault(),C&&n.code&&n.description&&n.title?fetch("/posts/",{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json",Authorization:"Bearer "+C}}).then((function(e){return e.json()})).then((function(e){e.success?(document.getElementById("post-form").value="",window.location.reload(!1)):d({msg:e.msg,severity:"error",key:Math.random()})})):d({msg:"Write a post first!",severity:"error",key:Math.random()})},children:[Object(y.jsx)("h2",{children:"Post a new code snippet"}),Object(y.jsxs)("label",{children:[Object(y.jsx)("br",{}),Object(y.jsx)(b.a,{type:"text",label:"Title",name:"title",onChange:h,fullWidth:!0})]}),Object(y.jsxs)("label",{children:[Object(y.jsx)("br",{}),Object(y.jsx)(b.a,{type:"text",label:"Description",name:"description",onChange:h,multiline:!0,rows:5,fullWidth:!0})]}),Object(y.jsx)("br",{}),Object(y.jsxs)("label",{children:[Object(y.jsx)("br",{}),Object(y.jsx)(b.a,{type:"text",label:"Code",name:"code",onChange:h,multiline:!0,rows:10,fullWidth:!0})]}),Object(y.jsx)("br",{}),Object(y.jsx)(u.a,{type:"submit",value:"Submit",variant:"contained",color:"primary",children:"Submit"})]}),i?Object(y.jsx)(g,{severity:i.severity,message:i.msg},i.key):null]}):Object(y.jsx)("div",{})},T=n(17),N=n.n(T),P=n(24),B=n(44),I=n(45),E=n(69),A=n(68),D=n(420),G=n(410),M=n(415),W=n(421),J=n(105),_=n.n(J),H=n(414),F=n(67),L=n(104),R=n.n(L),z=function(e){var t=p(),n=Object(s.useState)(null),a=Object(j.a)(n,2),r=a[0],c=a[1];return Object(y.jsxs)("div",{children:[Object(y.jsx)(b.a,{className:t.search,type:"text",name:"search",label:"Search",InputProps:{endAdornment:Object(y.jsx)(R.a,{})},onKeyPress:function(){var t=Object(P.a)(N.a.mark((function t(n){var s,a,r;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("Enter"!==n.key){t.next=12;break}return n.preventDefault(),s=n.target.value,n.target.blur(),t.next=6,fetch("/posts/search/"+s,{method:"GET",headers:{"Content-Type":"application/json"}});case 6:return a=t.sent,t.next=9,a.json();case 9:0===(r=t.sent).length&&c({msg:"No posts found with those keywords",severity:"error",key:Math.random()}),e.setPosts(r);case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}),r?Object(y.jsx)(g,{severity:r.severity,message:r.msg},r.key):null]})},K=function(e){Object(E.a)(n,e);var t=Object(A.a)(n);function n(){var e;Object(B.a)(this,n);for(var s=arguments.length,a=new Array(s),r=0;r<s;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))).state={posts:null},e}return Object(I.a)(n,[{key:"setPosts",value:function(e){e.length>0&&this.setState({posts:e});for(var t=document.getElementsByClassName("code"),n=0;n<t.length;n++)F.highlightElement(t[n])}},{key:"fetchPosts",value:function(){var e=Object(P.a)(N.a.mark((function e(){var t,n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/posts/",{method:"GET",headers:{"Content-Type":"application/json"}});case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,this.setPosts(n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=Object(P.a)(N.a.mark((function e(){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetchPosts();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props.navigate,n=this.props.classes;return Object(y.jsxs)("div",{children:[Object(y.jsx)(O.a,{onClick:function(){e.fetchPosts()},"aria-label":"Cached",children:Object(y.jsx)(_.a,{})}),Object(y.jsx)(z,{setPosts:function(t){e.setPosts(t)}}),this.state.posts?Object(y.jsx)("div",{children:Object(y.jsx)(D.a,{children:this.state.posts.map((function(e,s){return Object(y.jsxs)("div",{children:[Object(y.jsxs)(G.a,{className:n.listItem,sx:{bgcolor:"primary.light"},children:[Object(y.jsx)(H.a,{onClick:function(){t("posts/"+e._id)},sx:{cursor:"pointer"},variant:"h5",children:e.title}),Object(y.jsx)(W.a,{sx:{display:"inline-block"},primary:Object(y.jsxs)(a.a.Fragment,{children:[Object(y.jsx)(H.a,{children:e.description}),Object(y.jsx)("span",{className:"code",children:e.code})]}),secondary:Object(y.jsxs)(H.a,{className:n.listItemSecondaryText,component:"span",variant:"body2",color:"secondary",children:[e.user.substring(0,e.user.indexOf("@")),Object(y.jsx)("br",{}),e.timestamp]})})]}),Object(y.jsx)(M.a,{variant:"inset",component:"li",className:n.divider})]},s)}))})}):Object(y.jsx)("div",{children:"No posts found"})]})}}]),n}(a.a.Component);function U(e){var t=Object(i.f)(),n=p();return Object(y.jsx)(K,Object(l.a)(Object(l.a)({},e),{},{navigate:t,classes:n}))}var q=n(412),Q=n(403),V=function(){var e=p(),t=Object(Q.a)((function(e){return e.breakpoints.up("md")}));return Object(y.jsx)(d.a,{className:e.dashBoardBox,children:Object(y.jsxs)(q.a,{direction:t?"row":"column",container:!0,spacing:1,children:[Object(y.jsx)(q.a,{className:e.fetchPosts,item:!0,xs:6,children:Object(y.jsx)(U,{})}),Object(y.jsx)(q.a,{item:!0,xs:5,className:e.postForm,children:Object(y.jsx)(S,{})})]})})},X=function(){return Object(y.jsx)("div",{children:Object(y.jsx)("h1",{children:"404: webpage not found :c "})})},Y=n(27),Z=n(416),$=n(417),ee=function(){var e=Object(s.useState)(!1),t=Object(j.a)(e,2),n=t[0],a=t[1],r=Object(i.f)(),c=Object(Q.a)((function(e){return e.breakpoints.up("md")})),o=p();function l(){r("")}return Object(s.useEffect)((function(){localStorage.getItem("auth_token")&&a(!0)}),[]),Object(y.jsx)("div",{children:n?Object(y.jsx)(d.a,{sx:{flexGrow:1},children:Object(y.jsx)(Z.a,{position:"static",children:Object(y.jsx)($.a,{children:Object(y.jsxs)(q.a,{className:o.navbarGrid,container:!0,spacing:3,direction:c?"row":"column",children:[Object(y.jsx)(q.a,{item:!0,children:Object(y.jsx)(u.a,{color:"secondary",onClick:l,type:"button",children:Object(y.jsx)(H.a,{className:o.title,variant:c?"h3":"h4",children:"Snippet Posts"})})}),Object(y.jsx)(q.a,{item:!0,children:Object(y.jsx)(u.a,{onClick:function(){localStorage.removeItem("auth_token"),r("login"),a(!1),window.location.reload(!1)},type:"button",variant:"contained",color:"secondary",className:o.navButton,children:"Logout"})})]})})})}):Object(y.jsx)(d.a,{sx:{flexGrow:1},children:Object(y.jsx)(Z.a,{position:"static",children:Object(y.jsx)($.a,{children:Object(y.jsxs)(q.a,{className:o.navbarGrid,container:!0,spacing:3,direction:c?"row":"column",children:[Object(y.jsx)(q.a,{item:!0,children:Object(y.jsx)(u.a,{onClick:l,type:"button",color:"secondary",children:Object(y.jsx)(H.a,{className:o.title,variant:c?"h3":"h5",children:"Snippet Posts"})})}),Object(y.jsx)(q.a,{item:!0,children:Object(y.jsx)(Y.b,{to:"register",children:Object(y.jsx)(u.a,{variant:"contained",color:"secondary",type:"button",children:"Register"})})}),Object(y.jsx)(q.a,{item:!0,children:Object(y.jsx)(Y.b,{to:"login",children:Object(y.jsx)(u.a,{variant:"contained",color:"secondary",type:"button",children:"Login"})})})]})})})})})},te=localStorage.getItem("auth_token"),ne=function(e){var t=Object(s.useState)({}),n=Object(j.a)(t,2),a=n[0],r=n[1],c=Object(s.useState)(null),i=Object(j.a)(c,2),d=i[0],h=i[1],m=p(),O=e.id;return te?Object(y.jsxs)("div",{children:[Object(y.jsx)(b.a,{className:m.addCommentTextArea,type:"text",id:"content",label:"Add a comment",name:"content",onChange:function(e){var t=e.target.name,n=e.target.value;r((function(e){return Object(l.a)(Object(l.a)({},e),{},Object(o.a)({},t,n))}))},fullWidth:!0}),Object(y.jsx)(u.a,{type:"submit",id:"submit",value:"Submit",variant:"contained",color:"primary",onClick:function(t){t.preventDefault(),te&&a.content?fetch("/posts/comment/"+O,{method:"POST",body:JSON.stringify(a),headers:{"Content-Type":"application/json",Authorization:"Bearer "+te}}).then((function(t){t.json().then((function(t){t.success&&(h({msg:"Comment posted!",severity:"success",key:Math.random()}),document.getElementById("content").value="",e.fetchPostAndHighlight(O))}))})):h({msg:"Write a comment first!",severity:"error",key:Math.random()})},children:"comment"}),d?Object(y.jsx)(g,{severity:d.severity,message:d.msg},d.key):null]}):Object(y.jsx)("div",{})},se=n(106),ae=n.n(se),re=n(107),ce=n.n(re);var ie=function(e){if(e){var t=e.split(".")[1].replace("-","+").replace("_","/");return JSON.parse(window.atob(t))}},oe=localStorage.getItem("auth_token"),le=function(e){var t=p(),n=Object(s.useState)(0),a=Object(j.a)(n,2),r=a[0],c=a[1],i=Object(s.useState)(e.post.likes),o=Object(j.a)(i,2),l=o[0],u=o[1];function b(e){return d.apply(this,arguments)}function d(){return d=Object(P.a)(N.a.mark((function t(n){return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("/posts/vote/"+e.id,{method:"PATCH",body:JSON.stringify({vote:n}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+oe}});case 2:case"end":return t.stop()}}),t)}))),d.apply(this,arguments)}function h(e){return m.apply(this,arguments)}function m(){return(m=Object(P.a)(N.a.mark((function e(t){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(0),e.next=3,b(0);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(){return(x=Object(P.a)(N.a.mark((function e(){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(1!==r){e.next=5;break}u(l-1),h(1),e.next=18;break;case 5:if(-1!==r){e.next=14;break}return u(l+2),e.next=9,h(-1);case 9:return c(1),e.next=12,b(1);case 12:e.next=18;break;case 14:return u(l+1),c(1),e.next=18,b(1);case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(){return(f=Object(P.a)(N.a.mark((function e(){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(-1!==r){e.next=5;break}u(l+1),h(-1),e.next=18;break;case 5:if(1!==r){e.next=14;break}return u(l-2),e.next=9,h(1);case 9:return c(-1),e.next=12,b(-1);case 12:e.next=18;break;case 14:return u(l-1),c(-1),e.next=18,b(-1);case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(s.useEffect)((function(){if(oe){function t(){return n.apply(this,arguments)}function n(){return(n=Object(P.a)(N.a.mark((function t(){var n,s,a;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=ie(oe),t.next=3,fetch("/users/"+n.id,{method:"GET"});case 3:return s=t.sent,t.next=6,s.json();case 6:(s=t.sent)&&(a=s.votes.find((function(t){return t.post.toString()===e.id})))&&(1===a.vote?c(1):c(-1));case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}t()}}),[e.id]),oe?Object(y.jsxs)(q.a,{container:!0,className:t.likesGrid,children:[Object(y.jsx)(q.a,{item:!0,children:l}),Object(y.jsx)(O.a,{color:1===r?"select":"secondary",onClick:function(){return x.apply(this,arguments)},"aria-label":"ThumbUp",children:Object(y.jsx)(ae.a,{})}),Object(y.jsx)(O.a,{color:-1===r?"select":"secondary",onClick:function(){return f.apply(this,arguments)},"aria-label":"ThumbDown",children:Object(y.jsx)(ce.a,{})})]}):Object(y.jsx)(q.a,{container:!0,className:t.likesGrid,children:Object(y.jsxs)(q.a,{item:!0,children:["Likes: ",l]})})},je=function(e){Object(E.a)(n,e);var t=Object(A.a)(n);function n(){var e;Object(B.a)(this,n);for(var s=arguments.length,a=new Array(s),r=0;r<s;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))).state={post:null},e}return Object(I.a)(n,[{key:"componentDidMount",value:function(){var e=Object(P.a)(N.a.mark((function e(){var t;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.props.id,this.fetchPostAndHighlight(t);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchPostAndHighlight",value:function(){var e=Object(P.a)(N.a.mark((function e(t){var n,s,a;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/posts/"+t,{method:"GET",headers:{"Content-Type":"application/json"}});case 2:return n=e.sent,e.next=5,n.json();case 5:(s=e.sent)&&this.setState({post:s}),a=document.getElementById("code"),F.highlightElement(a);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state.post,n=this.props.id,s=this.props.classes;return Object(y.jsx)("div",{children:this.state.post?Object(y.jsxs)(d.a,{className:s.postDetailsBox,children:[Object(y.jsxs)(d.a,{className:s.postBox,bgcolor:"primary.light",children:[Object(y.jsx)(H.a,{variant:"h4",children:t.title}),Object(y.jsx)(H.a,{className:s.postContent,children:t.description}),Object(y.jsx)("span",{id:"code",className:s.postContent,children:t.code}),Object(y.jsxs)(H.a,{className:s.postInfo,children:[t.user.substring(0,t.user.indexOf("@")),Object(y.jsx)("br",{}),t.timestamp]}),Object(y.jsx)(le,{post:t,id:n})]}),Object(y.jsx)(ne,{id:n,fetchPostAndHighlight:function(t){e.fetchPostAndHighlight(t)}}),t.comments?t.comments.map((function(e,t){return Object(y.jsxs)("div",{children:[Object(y.jsx)(q.a,{item:!0,children:Object(y.jsx)(H.a,{className:s.commentContent,children:e.content})}),Object(y.jsxs)(q.a,{className:s.postInfo,container:!0,children:[Object(y.jsx)(q.a,{item:!0,xs:1,color:"secondary",children:Object(y.jsx)(H.a,{children:e.user.substring(0,e.user.indexOf("@"))})}),Object(y.jsx)(q.a,{item:!0,xs:8,color:"secondary",children:Object(y.jsx)(H.a,{children:e.timestamp})})]}),Object(y.jsx)(M.a,{className:s.divider,variant:"inset"})]},t)})):null]}):Object(y.jsx)("div",{children:"No post found"})})}}]),n}(a.a.Component);function ue(e){var t=Object(i.g)().id,n=p();return Object(y.jsx)(je,Object(l.a)(Object(l.a)({},e),{},{id:t,classes:n}))}var be=n(413),de=n(89),he=Object(de.a)({palette:{primary:{main:"#B4C9CF",background:"#E6EDEF",contrastText:"#3C3C3B"},secondary:{main:"#3C3C3B",contrastText:"#B4C9CF"},select:{main:"#3B60E4"},contrastThreshold:3,tonalOffset:.2}}),pe=n(404);var me=function(){return Object(y.jsx)(be.a,{theme:he,children:Object(y.jsxs)(pe.a,{sx:{color:"primary.contrastText",bgcolor:"primary.background",width:"100%",minHeight:"100vh"},children:[Object(y.jsx)(ee,{}),Object(y.jsxs)(i.c,{children:[Object(y.jsx)(i.a,{path:"/",element:Object(y.jsx)(V,{})}),Object(y.jsx)(i.a,{path:"/posts/:id",element:Object(y.jsx)(ue,{})}),Object(y.jsx)(i.a,{path:"/login",element:Object(y.jsx)(k,{})}),Object(y.jsx)(i.a,{path:"/Register",element:Object(y.jsx)(w,{})}),Object(y.jsx)(i.a,{path:"*",element:Object(y.jsx)(X,{})})]})]})})};c.a.render(Object(y.jsx)(a.a.StrictMode,{children:Object(y.jsx)(Y.a,{children:Object(y.jsx)(me,{})})}),document.getElementById("root"))}},[[344,1,2]]]);
//# sourceMappingURL=main.04c441b9.chunk.js.map